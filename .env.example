# StoryApp 统一环境变量配置模板
# 符合 ultrathink 理念：本地/服务器通用变量模版
# 使用方式：cp .env.example .env，然后填入真实值

# ===== 应用基础配置 =====
PORT=5000
APP_PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:3000

# ===== Docker & 镜像配置 =====
# GHCR 镜像标签（用于 docker-compose.ghcr.yml）
APP_TAG=sha-latest
# 构建配置
NODE_IMAGE=node:18-alpine
NPM_REGISTRY=https://registry.npmmirror.com

# ===== 端口映射配置 =====
# 开发环境：5000
# GHCR验证：5001  
# Nginx代理：80
WEB_PORT=80

# ===== MongoDB 配置 =====
MONGO_USER=root
MONGO_PASS=pass123
MONGO_DB=storyapp
MONGO_HOST=mongo
MONGO_PORT=27017
# 完整连接URI（compose中自动构建）
# MONGODB_URI=mongodb://root:pass123@mongo:27017/storyapp?authSource=admin

# ===== DeepSeek API 配置（必需）=====
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_API_URL=https://api.deepseek.com

# ===== 安全 & 限流配置 =====
CORS_ORIGIN=*
RATE_LIMIT_WINDOW_MS=900000  # 15分钟
RATE_LIMIT_MAX_REQUESTS=100   # 每个IP最大请求数

# ===== 日志记录配置 =====
ENABLE_DETAILED_LOGGING=true
ENABLE_FILE_LOGGING=false
ENABLE_DB_LOGGING=true
LOG_LEVEL=info
LOG_RETENTION_DAYS=30

# ===== 性能监控配置 =====
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=1.0

# ===== 部署相关配置 =====
# 生产域名（nginx配置用）
DOMAIN=storyapp.dandanbaba.xyz
# SSL证书路径（如启用HTTPS）
# SSL_CERT_PATH=/etc/nginx/certs
# SSL_KEY_PATH=/etc/nginx/certs

# ===== 开发调试配置 =====
# 本地前端开发服务器
REACT_APP_API_URL=http://localhost:5000/api
REACT_APP_VERSION=1.0.0
REACT_APP_DEBUG=true